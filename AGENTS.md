下面是**可直接替换**我们 AGENTS.md 中「对 AI 代理的说明」的加强版（参考你给的文件规则与表述风格）。

---

## 8. 对 AI 代理的说明（增强版）

### 8.1 严禁事项

* 严禁引入新的后端框架（例如 Django/FastAPI 等），项目保持 Flask + SQLite 的最小栈不变。
* 严禁修改系统配置或执行需要 root 权限的命令（例如 apt-get、systemctl）。如确有必要，只能给出建议与手工步骤，不得自动执行。
* 严禁自动执行 `git commit` / `git push`。
* 严禁在模板中内联大量 CSS/JS；样式与脚本应放入 `static/` 并保持命名清晰。
* 严禁通过删除表、删除字段的方式修改数据库结构；避免破坏已有数据。
* 严禁引入 Docker、Node 打包链或外链 CDN；所有资源必须本地可用、可离线运行（本项目部署与访问方式决定了这一点）。
* 严禁把服务监听地址改为对外可访问网卡（必须保持 `127.0.0.1` 监听），不得制造公网/内网暴露风险。

### 8.2 依赖管理与环境约束

* 任何新增 Python 依赖，必须同步更新 `requirements.txt`，且不要在代码里假设依赖“默认已安装”。
* 环境以 conda 为准，优先使用纯 Python 依赖；不新增系统层依赖（需要 apt 的一律不做自动化安装）。
* 不要在代码中假设服务器存在 GUI；所有调试输出应基于日志/终端可读信息（避免依赖本地桌面环境）。

### 8.3 变更说明要求

每次提交修改（PR 或等价变更说明）必须清晰列出：本次修改涉及的文件列表、每个文件的主要改动点，以及本地/服务器验证步骤（包含访问的 URL 与预期行为）。

### 8.4 数据库相关约束

* 尽量避免修改表结构；若确需修改，必须先在说明中给出迁移方案（备份方式、迁移步骤、回滚策略），并在获得许可后再改。
* 所有数据库操作使用参数化 SQL（或等价安全方式），避免 SQL 注入与字符串拼接。
* 任何会影响“刷新展示覆盖率（最近+随机）”的查询改动，都必须解释其对覆盖率与重复率的影响，并提供可复现的验证方法。

### 8.5 UI/动效实现约束（本项目特有）

* 动效优先采用轻量实现（CSS 动画与少量 requestAnimationFrame），避免复杂物理模拟与重型粒子系统，确保长时间运行不卡顿。
* 所有关键参数需集中成配置（例如 recent N、random M、寄语最大展示数、流星出现间隔范围、漂浮速度等），便于现场快速调参。
* 用户输入展示必须使用 `textContent` 等安全方式，禁止 `innerHTML`；发送前后端都要做 trim、空值与长度校验。

### 8.6 文档同步

如对入口文件、监听端口、数据库路径、接口形态、目录结构等做出实质调整，必须同步更新 AGENTS.md 相关段落以保持一致。
