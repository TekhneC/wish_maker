:root {
  color-scheme: dark;
  /* 你定义的新背景色 */
  --night-top: #050b14;
  --night-mid: #062758;
  --night-bot: #29d8c9;
  
  --cloud-yellow-bg: rgba(255, 248, 220, 0.95);
  --cloud-yellow-text: #785c25;
  --cloud-cyan-bg: rgba(200, 245, 255, 0.95);
  --cloud-cyan-text: #2a6075;
  
  --input-bg: rgba(255, 255, 255, 0.95);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
  background: var(--night-top);
  color: #fff;
  min-height: 100vh;
  overflow: hidden;
  user-select: none; /* 防止拖拽文字 */
}

.sky {
  position: relative;
  min-height: 100vh;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

/* 1. 背景 */
.gradient {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg, 
    var(--night-top) 0%, 
    var(--night-mid) 40%, 
    var(--night-bot) 100%
  );
  z-index: 0;
}
.gradient::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, transparent 20%, rgba(0,0,0,0.3) 100%);
  pointer-events: none;
}

/* 2. 星星粒子 (保持之前的 box-shadow 实现) */
.stars-sm, .stars-md, .stars-lg {
  position: absolute;
  top: 0; left: 0;
  background: transparent;
  z-index: 1;
}

.stars-sm {
  width: 1px; height: 1px;
  box-shadow: 
    10vw 10vh #fff, 20vw 80vh #fff, 30vw 30vh #fff, 40vw 50vh #fff, 
    50vw 10vh #fff, 60vw 90vh #fff, 70vw 20vh #fff, 80vw 60vh #fff,
    90vw 40vh #fff, 15vw 60vh #fff, 25vw 20vh #fff, 35vw 90vh #fff,
    45vw 40vh #fff, 55vw 80vh #fff, 65vw 10vh #fff, 75vw 50vh #fff,
    85vw 30vh #fff, 95vw 70vh #fff, 5vw 35vh #fff, 92vw 15vh #fff;
  animation: twinkle 7s infinite ease-in-out;
  opacity: 0.7;
}

.stars-md {
  width: 2px; height: 2px;
  box-shadow: 
    12vw 15vh #fffae0, 35vw 65vh #d4f5ff, 55vw 25vh #fff, 78vw 85vh #fffae0,
    88vw 15vh #d4f5ff, 42vw 45vh #fff, 8vw 90vh #fff;
  animation: twinkle 6s infinite ease-in-out 1s;
  opacity: 0.8;
}

.stars-lg {
  width: 3px; height: 3px;
  box-shadow: 20vw 20vh #fff, 80vw 30vh #ffe, 50vw 80vh #eef;
  filter: drop-shadow(0 0 3px rgba(255,255,255,0.8));
  animation: twinkle 5s infinite ease-in-out 2s;
}

@keyframes twinkle {
  0%, 100% { opacity: 0.8; transform: scale(1); }
  50% { opacity: 0.3; transform: scale(0.5); }
}

/* 3. 烟花粒子大字 (新实现) */
.firework-text {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 2;
  
  font-weight: 900;
  font-size: clamp(40px, 9vw, 110px);
  letter-spacing: 0.12em;
  
  /* 核心技巧：背景是重复的径向渐变（圆点），clip 到文字上 */
  color: transparent;
  background-image: radial-gradient(circle, rgba(255, 230, 150, 0.9) 20%, transparent 25%),
                    radial-gradient(circle, rgba(255, 255, 255, 0.8) 20%, transparent 25%);
  background-size: 6px 6px, 10px 10px; /* 两种不同大小的点阵 */
  background-position: 0 0, 3px 3px;
  -webkit-background-clip: text;
  background-clip: text;
  
  /* 光晕 */
  filter: drop-shadow(0 0 5px rgba(255, 210, 80, 0.4)) 
          drop-shadow(0 0 15px rgba(255, 210, 80, 0.2));
  
  /* 闪烁动画 */
  animation: shimmer 3s infinite linear;
}

/* 让背景图案移动，产生像火花流动的效果 */
@keyframes shimmer {
  0% { background-position: 0 0, 3px 3px; opacity: 0.8; }
  50% { opacity: 1; filter: drop-shadow(0 0 8px rgba(255, 210, 80, 0.6)) drop-shadow(0 0 20px rgba(255, 210, 80, 0.3));}
  100% { background-position: 6px 6px, 13px 13px; opacity: 0.8; }
}

.firework-text span {
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
}

/* 4. 许愿云朵 (移除 CSS 动画，只留样式) */
.wishes {
  position: absolute;
  inset: 0;
  pointer-events: none; /* JS 接管交互后，这里依然保持穿透，JS 会监听具体的 .wish 元素 */
  z-index: 4;
}

.wish {
  position: absolute;
  /* 初始位置由 JS 设置，这里只设基本样式 */
  left: 0;
  top: 0;
  will-change: transform; /* 性能优化 */
  
  padding: 12px 22px;
  border-radius: 30px;
  font-size: 17px;
  font-weight: 600;
  line-height: 1.4;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  opacity: 0; /* JS 控制淡入 */
  transform: translate3d(0,0,0); /* 开启 GPU 加速 */
  
  max-width: min(60vw, 380px);
  backdrop-filter: blur(4px);
  pointer-events: auto; /* 允许鼠标交互 */
  cursor: grab;
}

.wish.yellow {
  background: var(--cloud-yellow-bg);
  color: var(--cloud-yellow-text);
  border: 2px solid rgba(255,255,255,0.6);
}

.wish.cyan {
  background: var(--cloud-cyan-bg);
  color: var(--cloud-cyan-text);
  border: 2px solid rgba(255,255,255,0.7);
}

/* 5. 底部输入栏 */
.input-bar {
  position: absolute;
  left: 50%;
  bottom: 40px;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 12px;
  width: min(600px, 85vw);
  padding: 8px 10px 8px 16px;
  border-radius: 999px;
  background: var(--input-bg);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.2),
    inset 0 1px 2px rgba(255,255,255,0.9);
  z-index: 5;
}

.input-bar input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  font-size: 16px;
  color: #333;
}
.input-bar input::placeholder { color: #889bb3; }

.send-button {
  position: relative;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background: linear-gradient(135deg, #ffd659, #ffc02e);
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(255, 190, 40, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
}

.send-button:active { transform: scale(0.9); }

.send-button .plane {
  width: 0; height: 0;
  border-left: 7px solid transparent;
  border-right: 7px solid transparent;
  border-bottom: 14px solid #fff;
  transform: rotate(45deg) translate(-1px, 1px);
}

.send-button.fly .plane { animation: flyIcon 0.6s ease-in forwards; }

@keyframes flyIcon {
  0% { transform: rotate(45deg) translate(-1px, 1px); }
  50% { transform: translate(30px, -30px) rotate(45deg) scale(0.6); opacity: 1; }
  100% { transform: translate(60px, -60px) rotate(45deg) scale(0); opacity: 0; }
}

/* 6. 流星 */
.meteor {
  position: absolute;
  width: 150px;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.9));
  top: -100px;
  left: -100px;
  opacity: 0;
  z-index: 2;
  border-radius: 2px;
  box-shadow: 0 0 10px rgba(255,255,255,0.8);
}

.meteor.active {
  animation: meteorDash 1.4s ease-out forwards;
}

@keyframes meteorDash {
  0% { opacity: 1; transform: translate(0, 0) rotate(45deg); }
  100% { opacity: 0; transform: translate(120vw, 120vh) rotate(45deg); }
}

@media (max-width: 768px) {
  .firework-text { font-size: 32px; }
  .wish { font-size: 15px; padding: 10px 14px; }
  .input-bar { width: 92vw; bottom: 25px; }
}